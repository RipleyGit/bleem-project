import{a as V,r as p,y as D,az as W,q as $,ae as i,Q as C,W as _,o as j,b as R,e as o,J as U,$ as m,U as B,V as c,G as l,H as n,ap as G,X as J,t as K}from"./vue.DKOcwzik.js";import{u as N,a as O,l as Q,S as X,L as Z,f as h,_ as ee}from"./index.BLQPjP0P.js";import{c as te}from"./user.CNPc-XGb.js";import{u as oe,a as z}from"./index.CYWvMG1A.js";const se={class:"fixed inset-0 w-full h-full z-[9999992]"},le={class:"absolute left-[30px] bottom-[50px]"},ae={class:"text-[100px] text-white leading-none"},ie={class:"text-base"},ne={class:"text-[40px] text-white"},ce={class:"absolute right-[30px] bottom-[50px] flex flex-col items-center gap-2 text-white/80 hover:text-white cursor-pointer transition-all"},re={class:"w-10 h-10 rounded-full border border-white/30 bg-white/10 flex items-center justify-center hover:bg-white/20 hover:border-white/50 transition-all"},ue={class:"relative z-[9999994] w-full h-full flex flex-col justify-center text-white"},me={class:"text-center m-auto"},de={class:"w-[180px] h-[180px] mx-auto"},fe=["src"],pe={class:"text-2xl mt-4 mb-8"},he={class:"flex gap-1"},ve={class:"text-red-500 mt-2"},we={class:"absolute right-[30px] bottom-[30px] flex gap-4"},xe=ee(V({name:"layoutLockScreen",setup(Se){const v=p(),d=D({username:"",avatar:""}),w=p(),x=p(),q=N(),{themeConfig:a}=W(q),e=D({transparency:1,downClientY:0,moveDifference:0,isShowLoockLogin:!1,isFlags:!1,querySelectorEl:"",time:{hm:"",s:"",mdq:""},isShowLockScreen:!1,lockScreenPassword:""}),Y=t=>{e.isFlags=!0,e.downClientY=t.clientY},T=t=>{e.isFlags=!0,e.downClientY=t.touches[0].clientY},H=t=>{e.moveDifference=t.clientY-e.downClientY,S()},M=t=>{e.moveDifference=t.touches[0].clientY-e.downClientY,S()},{start:E}=oe(()=>{var s;const t=e.querySelectorEl;(s=t==null?void 0:t.parentNode)==null||s.removeChild(t)},300,{immediate:!1}),S=()=>{if(!e.isFlags)return;const t=e.querySelectorEl,s=e.transparency-=.005;e.moveDifference>=0||(t.setAttribute("style",`top:${e.moveDifference}px;cursor:pointer;opacity:${s};`),e.moveDifference<-400&&(t.setAttribute("style",`top:${-t.clientHeight}px;cursor:pointer;transition:all 0.3s ease;`),e.moveDifference=-t.clientHeight,E()),e.moveDifference===-t.clientHeight&&(e.isShowLoockLogin=!0,x.value.focus()))},g=()=>{e.isFlags=!1,e.transparency=1,e.moveDifference>=-400&&e.querySelectorEl.setAttribute("style","top:0px;opacity:1;transition:all 0.3s ease;")};z(()=>{e.time.hm=h(new Date,"HH:MM"),e.time.s=h(new Date,"SS"),e.time.mdq=h(new Date,"mm\u6708dd\u65E5\uFF0CWWW")},1e3,{immediate:!0});const r=z(()=>{if(a.value.lockScreenTime<=1)return e.isShowLockScreen=!0,f(!0),void r.pause();a.value.lockScreenTime--},1e3,{immediate:!1}),f=t=>{a.value.isLockScreen=t,a.value.isDrawer=!1,t||(e.isShowLockScreen=!1,e.isShowLoockLogin=!1,e.lockScreenPassword="",a.value.lockScreenTime=60,r.pause()),Z.set("themeConfig",a.value)},y=async()=>{try{await te(e.lockScreenPassword),f(!1)}catch(t){v.value=t.msg}},F=async()=>{await Q(),X.clear(),f(!1),window.location.reload()};return $(()=>{const t=O().userInfos;Object.assign(d,t.user),K(()=>{e.querySelectorEl=w.value}),a.value.isLockScreen?a.value.lockScreenTime<=1?e.isShowLockScreen=!0:r.resume():r.pause()}),(t,s)=>{const u=i("SvgIcon"),P=i("ele-Right"),k=i("el-icon"),b=i("el-button"),A=i("ele-SwitchButton"),I=i("el-input");return C((j(),R("div",null,[s[3]||(s[3]=o("div",{class:"fixed inset-0 w-full h-full bg-white z-[9999990]"},null,-1)),o("div",{class:U(["lock-screen-bg fixed inset-0 w-full h-full bg-cover bg-center z-[9999991]",{"blur-[1px]":e.isShowLoockLogin}])},null,2),o("div",se,[o("div",{class:"absolute inset-0 w-full h-full text-white z-[9999993] select-none",ref_key:"layoutLockScreenDateRef",ref:w,onMousedown:Y,onMousemove:H,onMouseup:g,onTouchstart:m(T,["stop"]),onTouchmove:m(M,["stop"]),onTouchend:m(g,["stop"])},[o("div",le,[o("div",ae,[B(c(e.time.hm),1),o("span",ie,c(e.time.s),1)]),o("div",ne,c(e.time.mdq),1)]),o("div",ce,[o("div",re,[l(u,{name:"ele-Top"})]),s[2]||(s[2]=o("span",{class:"text-xs"},"\u4E0A\u6ED1\u89E3\u9501",-1))])],544),l(J,{name:"el-zoom-in-center"},{default:n(()=>[C(o("div",ue,[o("div",me,[o("div",de,[o("img",{src:d.avatar,class:"w-full h-full rounded-full"},null,8,fe)]),o("div",pe,c(d.username),1),o("div",null,[l(I,{placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",ref_key:"layoutLockScreenInputRef",ref:x,modelValue:e.lockScreenPassword,"onUpdate:modelValue":s[0]||(s[0]=L=>e.lockScreenPassword=L),type:"password",onKeyup:s[1]||(s[1]=G(m(L=>y(),["stop"]),["enter","native"]))},{append:n(()=>[o("div",he,[l(b,{onClick:y,title:"\u89E3\u9501",class:"!m-0 !px-2 !text-blue-500 hover:!bg-blue-50"},{default:n(()=>[l(k,null,{default:n(()=>[l(P)]),_:1})]),_:1}),l(b,{onClick:F,title:"\u9000\u51FA\u767B\u5F55",class:"!m-0 !px-2 !text-red-500 hover:!bg-red-50"},{default:n(()=>[l(k,null,{default:n(()=>[l(A)]),_:1})]),_:1})])]),_:1},8,["modelValue"]),o("p",ve,c(v.value),1)])]),o("div",we,[l(u,{name:"ele-Microphone",size:20,class:"cursor-pointer opacity-80 hover:opacity-100"}),l(u,{name:"ele-AlarmClock",size:20,class:"cursor-pointer opacity-80 hover:opacity-100"}),l(u,{name:"ele-SwitchButton",size:20,class:"cursor-pointer opacity-80 hover:opacity-100"})])],512),[[_,e.isShowLoockLogin]])]),_:1})])],512)),[[_,e.isShowLockScreen]])}}}),[["__scopeId","data-v-fcaf33a4"]]);export{xe as default};
