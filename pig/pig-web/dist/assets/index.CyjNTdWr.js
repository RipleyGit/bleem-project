import{d as T,_ as U}from"./index.BLQPjP0P.js";import{a as $,y as A,r as y,f as D,q as G,ae as l,o as x,b as k,e as v,G as o,x as H,u as t,H as d,J as I,U as J,V as M,S as O,a7 as R,D as z}from"./vue.DKOcwzik.js";const K={class:"head-container"},P={class:"head-container-header"},Q={class:"head-container-header-input"},W={key:0,class:"head-container-header-dropdown"},X=U($({name:"query-tree",props:{props:{type:Object,default:()=>({label:"name",children:"children",value:"id"})},placeholder:{type:String,default:""},loading:{type:Boolean,default:!1},query:{type:Function,required:!0},showExpand:{type:Boolean,default:!1}},emits:["search","nodeClick"],setup(u,{expose:_,emit:w}){const L=w,n=u,r=A({List:[],localLoading:n.loading}),m=y(),s=y(),i=y(!0),b=D(()=>["!h-[20px]","reset-margin","!text-gray-500","dark:!text-white","dark:hover:!text-primary"]),q=e=>{L("nodeClick",e)},f=()=>{if(n.query instanceof Function){r.localLoading=!0;const e=n.query(t(s));typeof e!="object"&&typeof e!="function"||typeof e.then!="function"||e.then(a=>{r.List=a.data}).catch(a=>{T().error(a.msg)})}};return G(()=>{f()}),_({getdeptTree:f}),(e,a)=>{const C=l("el-input"),V=l("MoreFilled"),F=l("el-icon"),j=l("el-button"),B=l("el-dropdown-item"),E=l("el-dropdown-menu"),N=l("el-dropdown"),S=l("el-tree");return x(),k("div",K,[v("div",P,[v("div",Q,[o(C,{modelValue:t(s),"onUpdate:modelValue":a[0]||(a[0]=c=>H(s)?s.value=c:null),"suffix-icon":"search",placeholder:u.placeholder,clearable:"",onChange:f},null,8,["modelValue","placeholder"])]),u.showExpand?(x(),k("div",W,[o(N,{"hide-on-click":!1},{dropdown:d(()=>[o(E,null,{default:d(()=>[o(B,null,{default:d(()=>[o(j,{class:I(t(b)),link:"",type:"primary",icon:t(i)?"expand":"fold",onClick:a[1]||(a[1]=c=>(p=>{i.value=p;const g=m.value.store._getAllNodes();for(let h=0;h<g.length;h++)g[h].expanded=p})(!t(i)))},{default:d(()=>[J(M(t(i)?"\u6298\u53E0":"\u5C55\u5F00"),1)]),_:1},8,["class","icon"])]),_:1})]),_:1})]),default:d(()=>[o(F,{style:{transform:"rotate(90deg)"}},{default:d(()=>[o(V)]),_:1})]),_:1})])):O("",!0)]),o(S,{class:"mt20",data:t(r).List,props:n.props,"expand-on-click-node":!1,ref_key:"deptTreeRef",ref:m,loading:t(r).localLoading,"node-key":"id","highlight-current":"","default-expand-all":"",onNodeClick:q},R({_:2},[e.$slots.default?{name:"default",fn:d(({node:c,data:p})=>[z(e.$slots,"default",{node:c,data:p},void 0,!0)]),key:"0"}:void 0]),1032,["data","props","loading"])])}}}),[["__scopeId","data-v-20306c55"]]);export{X as default};
