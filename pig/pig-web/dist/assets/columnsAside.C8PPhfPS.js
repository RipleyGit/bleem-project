import{J as R,u as q,e as o,K as w,_ as z}from"./index.BLQPjP0P.js";import{a as E,r as P,az as _,aD as F,aF as G,y as K,q as V,Z,aI as B,p as Q,ae as D,o as m,b as c,G as k,H as U,e as h,M as W,a8 as X,u as i,J as y,V as N,t as Y}from"./vue.DKOcwzik.js";const ee={class:"layout-columns-aside"},le=["onClick","onMouseenter","title"],te={class:"columns-vertical-title font12"},ne=["href"],se={class:"columns-vertical-title font12"},ae=z(E({name:"layoutColumnsAside",setup(ie){const x=P([]),A=P(),f=R(),T=q(),{routesList:I,isColumnsMenuHover:j,isColumnsNavHover:J}=_(f),{themeConfig:u}=_(T),O=F(),$=G(),t=K({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[]}),g=e=>{t.liIndex=e,A.value.style.top=`${x.value[e].offsetTop+t.difference}px`},S=e=>{Y(()=>{g(e)})},d=e=>{const n=H(I.value,e);let a={children:[]};return t.columnsAsideList.map((s,l)=>{s.path===n.path&&(s.k=l,a.item={...s},a.children=[{...s}],s.children&&(a.children=s.children))}),a},b=e=>e.filter(n=>{var a;return!((a=n.meta)!=null&&a.isHide)}).map(n=>((n=Object.assign({},n)).children&&(n.children=b(n.children)),n)),H=(e,n)=>{let a;return e.forEach(s=>{s.path!==n?s.children&&H(s.children,n)&&(a=s):a=s}),a};return V(()=>{(()=>{var n;t.columnsAsideList=b(I.value);const e=d(O.path);if(Object.keys(e).length<=0)return!1;S((n=e.item)==null?void 0:n.k),o.emit("setSendColumnsChildren",e)})(),o.on("restoreDefault",()=>{t.liOldIndex=null,t.liOldPath=null})}),Z(()=>{o.off("restoreDefault",()=>{})}),B(e=>{(n=>{const a=H(I.value,n),s=t.columnsAsideList.find(l=>l.path===a.path);if(!s)return!1;setTimeout(()=>{S(s.k)},0)})(e.path),o.emit("setSendColumnsChildren",d(e.path))}),Q(w.state,e=>{if(e.themeConfig.themeConfig.columnsAsideStyle==="columnsRound"?t.difference=3:t.difference=0,e.routesList.isColumnsMenuHover||e.routesList.isColumnsNavHover){if(t.liHoverIndex=t.liOldIndex,!t.liOldPath)return!1;o.emit("setSendColumnsChildren",d(t.liOldPath))}else t.liHoverIndex=null,o.emit("setSendColumnsChildren",d(O.path))},{deep:!0}),(e,n)=>{const a=D("SvgIcon"),s=D("el-scrollbar");return m(),c("div",ee,[k(s,null,{default:U(()=>[h("ul",{onMouseleave:n[0]||(n[0]=l=>(async()=>{await f.setColumnsNavHover(!1),setTimeout(()=>{j||J||o.emit("restoreDefault")},100)})())},[(m(!0),c(W,null,X(i(t).columnsAsideList,(l,r)=>(m(),c("li",{key:r,onClick:v=>((L,p)=>{g(p);let{path:C,redirect:M}=L;M?$.push(M):$.push(C)})(l,r),onMouseenter:v=>((L,p)=>{if(!u.value.isColumnsMenuHoverPreload)return!1;let{path:C}=L;t.liOldPath=C,t.liOldIndex=p,t.liHoverIndex=p,o.emit("setSendColumnsChildren",d(C)),f.setColumnsMenuHover(!1),f.setColumnsNavHover(!0)})(l,r),ref_for:!0,ref:v=>{v&&(i(x)[r]=v)},class:y({"layout-columns-active":i(t).liIndex===r,"layout-columns-hover":i(t).liHoverIndex===r}),title:e.$t(l.name)},[!l.meta.isLink||l.meta.isLink&&l.meta.isIframe?(m(),c("div",{key:0,class:y(i(u).columnsAsideLayout)},[k(a,{name:l.meta.icon},null,8,["name"]),h("div",te,N(e.$t(l.name)&&e.$t(l.name).length>=4?e.$t(l.name).substr(0,i(u).columnsAsideLayout==="columns-vertical"?4:3):e.$t(l.name)),1)],2)):(m(),c("div",{key:1,class:y(i(u).columnsAsideLayout)},[h("a",{href:l.meta.isLink,target:"_blank"},[k(a,{name:l.meta.icon},null,8,["name"]),h("div",se,N(e.$t(l.name)&&e.$t(l.name).length>=4?e.$t(l.name).substr(0,i(u).columnsAsideLayout==="columns-vertical"?4:3):e.$t(l.name)),1)],8,ne)],2))],42,le))),128)),h("div",{ref_key:"columnsAsideActiveRef",ref:A,class:y(i(u).columnsAsideStyle)},null,2)],32)]),_:1})])}}}),[["__scopeId","data-v-9b3ddf1d"]]);export{ae as default};
