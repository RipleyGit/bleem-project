import{s as k}from"./index.BLQPjP0P.js";import{i as h}from"./echarts.iWV9t_ci.js";import{a as F,r as i,y as A,f,ae as E,o as u,b as v,e,M as _,a8 as B,G as p,H as x,at as g,aH as D,V as w,u as b}from"./vue.DKOcwzik.js";const O={class:"layout-padding"},z={class:"layout-padding-auto layout-padding-view"},M={class:"p-4 min-w-[375px] md:min-w-[700px] xl:min-w-[800px] mt-3 grid grid-cols-1 gap-5 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-3 3xl:grid-cols-6"},H={class:"flex flex-col justify-center w-auto ml-4 h-50"},R={class:"text-sm font-medium text-gray-600 dark:text-gray-400 font-dm"},S={class:"text-xl font-bold text-navy-700 dark:text-white"},P={class:"sm:flex"},j=F({name:"cache",setup(G){const t=i({}),n=i(),m=i(),d=A({commandChartOption:{tooltip:{trigger:"item"},series:[{label:{show:!0},labelLine:{show:!0},type:"pie",radius:"85%",color:["#0D47A1","#1565C0","#1976D2","#1E88E5","#2196F3","#42A5F5","#64B5F6","#90CAF9","#BBDEFB","#E3F2FD","#CAF0F8","#ADE8F4","#90E0EF","#48CAE4","#00B4D8","#0096C7","#0077B6","#023E8A","#03045E","#8ecae6","#98c1d9","#D9ED92","#B5E48C","#99D98C","#76C893","#52B69A","#34A0A4","#168AAD","#1A759F","#1E6091","#184E77","#457b9d"],data:[{value:"",name:""}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},memoryChartOption:{tooltip:{formatter:"{a} <br/>{b} : {c}%"},series:[{name:"Pressure",type:"gauge",radius:"100%",detail:{formatter:"{value}"},data:[{value:"",name:"\u5185\u5B58\u6D88\u8017"}]}]}});(async()=>{const s=await k({url:"/admin/system/cache",method:"get"});t.value=s.data.info,t.value.dbSize=s.data.dbSize,d.commandChartOption.series[0].data=s.data.commandStats,d.memoryChartOption.series[0].data[0].value=(s.data.info.used_memory/1024/1024).toFixed(2),d.memoryChartOption.series[0].detail.formatter="{value}M";const a=g(h(n.value)),r=g(h(m.value));a.setOption(d.commandChartOption),r.setOption(d.memoryChartOption)})();const y=f(()=>["Redis\u7248\u672C","\u5BA2\u6237\u7AEF\u6570","\u8FD0\u884C\u65F6\u95F4(\u5929)","\u4F7F\u7528\u5185\u5B58","AOF\u662F\u5426\u5F00\u542F","RDB\u662F\u5426\u6210\u529F"]),C=f(()=>{var s,a,r,l,o,c;return[(s=t.value)==null?void 0:s.redis_version,(a=t.value)==null?void 0:a.connected_clients,(r=t.value)==null?void 0:r.uptime_in_days,(l=t.value)==null?void 0:l.used_memory_human,((o=t.value)==null?void 0:o.aof_enabled)==0?"\u5F00\u542F":"\u5173\u95ED",((c=t.value)==null?void 0:c.aof_enabled)=="ok"?"\u6210\u529F":"\u5931\u8D25"]});return(s,a)=>{const r=E("el-card");return u(),v("div",O,[e("div",z,[e("div",M,[(u(),v(_,null,B(6,(l,o)=>e("div",{key:o,class:"relative flex flex-grow !flex-row flex-col items-center rounded-[10px] border-[1px] border-gray-200 bg-white hover:scale-105 hover:shadow-lg bg-clip-border shadow-md shadow-[#F3F3F3] dark:border-[#ffffff33] dark:!bg-[#1d1d1d] dark:text-white dark:shadow-none"},[a[0]||(a[0]=D('<div class="ml-[18px] flex h-[90px] w-auto flex-row items-center"><div class="p-3 rounded-full bg-lightPrimary dark:bg-navy-700"><span class="flex items-center text-brand-500 dark:text-white"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="h-7 w-7" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill="none" d="M0 0h24v24H0z"></path><path d="M4 9h4v11H4zM16 13h4v7h-4zM10 4h4v16h-4z"></path></svg></span></div></div>',1)),e("div",H,[e("p",R,w(b(y)[o]),1),e("h4",S,w(b(C)[o]),1)])])),64))]),e("div",P,[p(r,{class:"sm:mr-4 flex-1 !border-none mt-4 !bg-transparent dark:!bg-transparent",shadow:"never"},{default:x(()=>[e("div",null,[a[1]||(a[1]=e("div",{class:"mb-10 font-semibold dark:text-gray-200"},"\u547D\u4EE4\u7EDF\u8BA1",-1)),e("div",{class:"flex h-[30vh] items-center",ref_key:"commandChartRef",ref:n},null,512)])]),_:1}),p(r,{class:"flex-1 !border-none mt-4 !bg-transparent dark:!bg-transparent",shadow:"never"},{default:x(()=>[e("div",null,[a[2]||(a[2]=e("div",{class:"mb-10 font-semibold dark:text-gray-200"},"\u5185\u5B58\u4FE1\u606F",-1)),e("div",{class:"flex h-[30vh] items-center",ref_key:"memoryChartRef",ref:m},null,512)])]),_:1})])])])}}});export{j as default};
