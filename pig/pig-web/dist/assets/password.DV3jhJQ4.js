import{a as T,r as u,y as v,q as z,ae as r,o as y,E as x,H as a,G as e,u as o,e as d,J as B,S as E,V as S,ap as G}from"./vue.DKOcwzik.js";import{v as H,r as h,F as J,a as K}from"./index.BLQPjP0P.js";const M=["src"],R={class:"font12 mt30 login-animation4 login-msg"},j=T({name:"password",emits:["signInSuccess"],setup(A,{emit:P}){const{t:c}=H.useI18n(),V=P,_=u(),m=u(!1),l=v({isShowPassword:!1,ruleForm:{username:"admin",password:"123456",code:"",randomStr:""}}),k=v({username:[{validator:h.overLength,trigger:"blur"},{required:!0,trigger:"blur",message:c("password.accountPlaceholder1")}],password:[{validator:h.overLength,trigger:"blur"},{required:!0,trigger:"blur",message:c("password.accountPlaceholder2")}],code:[{validator:h.overLength,trigger:"blur"},{required:!0,trigger:"blur",message:c("password.accountPlaceholder3")}]}),$=u(!1),F=u(""),p=()=>{l.ruleForm.randomStr=J(),F.value=`undefined/auth/code/image?randomStr=${l.ruleForm.randomStr}`},b=async()=>{if(!await _.value.validate().catch(()=>{}))return!1;m.value=!0;try{await K().login(l.ruleForm),V("signInSuccess")}catch{p()}finally{m.value=!1}};return z(()=>{p()}),(t,s)=>{const U=r("ele-User"),g=r("el-icon"),f=r("el-input"),i=r("el-form-item"),q=r("ele-Unlock"),C=r("ele-Position"),w=r("el-col"),I=r("el-button"),L=r("el-form");return y(),x(L,{size:"large",class:"login-content-form",ref_key:"loginFormRef",ref:_,rules:o(k),model:o(l).ruleForm,onKeyup:G(b,["enter"])},{default:a(()=>[e(i,{class:"login-animation1",prop:"username"},{default:a(()=>[e(f,{text:"",placeholder:t.$t("password.accountPlaceholder1"),modelValue:o(l).ruleForm.username,"onUpdate:modelValue":s[0]||(s[0]=n=>o(l).ruleForm.username=n),clearable:"",autocomplete:"off"},{prefix:a(()=>[e(g,{class:"el-input__icon"},{default:a(()=>[e(U)]),_:1})]),_:1},8,["placeholder","modelValue"])]),_:1}),e(i,{class:"login-animation2",prop:"password"},{default:a(()=>[e(f,{type:o(l).isShowPassword?"text":"password",placeholder:t.$t("password.accountPlaceholder2"),modelValue:o(l).ruleForm.password,"onUpdate:modelValue":s[2]||(s[2]=n=>o(l).ruleForm.password=n),autocomplete:"off"},{prefix:a(()=>[e(g,{class:"el-input__icon"},{default:a(()=>[e(q)]),_:1})]),suffix:a(()=>[d("i",{class:B(["iconfont el-input__icon login-content-password",o(l).isShowPassword?"icon-yincangmima":"icon-xianshimima"]),onClick:s[1]||(s[1]=n=>o(l).isShowPassword=!o(l).isShowPassword)},null,2)]),_:1},8,["type","placeholder","modelValue"])]),_:1}),o($)?(y(),x(i,{key:0,class:"login-animation2",prop:"code"},{default:a(()=>[e(w,{span:15},{default:a(()=>[e(f,{text:"",maxlength:"4",placeholder:t.$t("mobile.placeholder2"),modelValue:o(l).ruleForm.code,"onUpdate:modelValue":s[3]||(s[3]=n=>o(l).ruleForm.code=n),clearable:"",autocomplete:"off"},{prefix:a(()=>[e(g,{class:"el-input__icon"},{default:a(()=>[e(C)]),_:1})]),_:1},8,["placeholder","modelValue"])]),_:1}),e(w,{span:1}),e(w,{span:8},{default:a(()=>[d("img",{src:o(F),onClick:p},null,8,M)]),_:1})]),_:1})):E("",!0),e(i,{class:"login-animation4"},{default:a(()=>[e(I,{type:"primary",class:"login-content-submit",loading:o(m),onClick:b},{default:a(()=>[d("span",null,S(t.$t("password.accountBtnText")),1)]),_:1},8,["loading"])]),_:1}),d("div",R,S(t.$t("browserMsgText")),1)]),_:1},8,["rules","model"])}}});export{j as default};
