const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/form.D5DYlQew.js","assets/index.BLQPjP0P.js","assets/vue.DKOcwzik.js","assets/index.D-bKb_v8.css"])))=>i.map(i=>d[i]);
import{v as le,p as Q,c as te,k as oe,w as ne,d as U,__tla as se}from"./index.BLQPjP0P.js";import{a as re,r as w,y as de,ae as r,af as G,o as d,b as ie,e as T,Q as h,W as ue,u as n,G as t,H as a,ap as me,U as s,V as p,E as i,x as ce,S,aC as pe}from"./vue.DKOcwzik.js";import{u as ye}from"./table.byngke96.js";let H,fe=Promise.all([(()=>{try{return se}catch{}})()]).then(async()=>{let B,D,R,q;B={class:"layout-padding"},D={class:"layout-padding-auto layout-padding-view"},R={class:"mb8",style:{width:"100%"}},q={style:{"margin-left":"12px"}},H=re({name:"systemMenu",setup(he){const M=pe(()=>te(()=>import("./form.D5DYlQew.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([0,1,2,3]))),{t:L}=le.useI18n(),E=w(),C=w(),F=w(),b=w(!0),x=w(!1),u=de({pageList:Q,queryForm:{menuName:""},isPage:!1}),{getDataList:y,tableStyle:N}=ye(u),V=(e,l)=>{C.value.openDialog(e,l)},P=e=>(e.children||[]).length>0,W=async()=>{x.value=!x.value;const e=await Q();A(e.data,x.value)},A=(e,l=!0)=>{var v;for(const f in e)(v=E.value)==null||v.toggleRowExpansion(e[f],l),e[f].children&&A(e[f].children,l)},j=()=>{u.dataList=[],y()},z=()=>{F.value.resetFields(),u.dataList=[],y()};return(e,l)=>{var K;const v=r("el-input"),f=r("el-form-item"),c=r("el-button"),J=r("el-form"),I=r("el-row"),X=r("right-toolbar"),m=r("el-table-column"),Y=r("SvgIcon"),_=r("el-tag"),Z=r("el-tooltip"),ee=r("el-table"),g=G("auth"),ae=G("loading");return d(),ie("div",B,[T("div",D,[h(t(I,{shadow:"hover",class:"ml10"},{default:a(()=>[t(J,{inline:!0,model:n(u).queryForm,onKeyup:me(n(y),["enter"]),ref_key:"queryRef",ref:F},{default:a(()=>[t(f,{label:e.$t("sysmenu.name"),prop:"menuName"},{default:a(()=>[t(v,{placeholder:e.$t("sysmenu.inputNameTip"),clearable:"",style:{"max-width":"180px"},modelValue:n(u).queryForm.menuName,"onUpdate:modelValue":l[0]||(l[0]=o=>n(u).queryForm.menuName=o)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),t(f,null,{default:a(()=>[t(c,{onClick:j,class:"ml10",icon:"search",type:"primary"},{default:a(()=>[s(p(e.$t("common.queryBtn")),1)]),_:1}),t(c,{onClick:z,icon:"Refresh"},{default:a(()=>[s(p(e.$t("common.resetBtn")),1)]),_:1})]),_:1})]),_:1},8,["model","onKeyup"])]),_:1},512),[[ue,n(b)]]),t(I,null,{default:a(()=>[T("div",R,[h((d(),i(c,{onClick:V,class:"ml10",icon:"folder-add",type:"primary"},{default:a(()=>[s(p(e.$t("common.addBtn")),1)]),_:1})),[[g,"sys_menu_add"]]),t(c,{onClick:W},{default:a(()=>[s(p(e.$t("common.expandBtn")),1)]),_:1}),t(X,{showSearch:n(b),"onUpdate:showSearch":l[1]||(l[1]=o=>ce(b)?b.value=o:null),class:"ml10",style:{float:"right","margin-right":"20px"},onQueryTable:n(y)},null,8,["showSearch","onQueryTable"])])]),_:1}),h((d(),i(ee,{ref_key:"tableRef",ref:E,data:n(u).dataList,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-key":"path",style:{width:"100%"},border:"","cell-style":n(N).cellStyle,"header-cell-style":(K=n(N))==null?void 0:K.headerCellStyle},{default:a(()=>[t(m,{label:e.$t("sysmenu.name"),fixed:"",prop:"name","show-overflow-tooltip":""},null,8,["label"]),t(m,{label:e.$t("sysmenu.sortOrder"),prop:"sortOrder","show-overflow-tooltip":""},null,8,["label"]),t(m,{label:e.$t("sysmenu.icon"),prop:"icon","show-overflow-tooltip":""},{default:a(o=>[t(Y,{name:o.row.meta.icon},null,8,["name"])]),_:1},8,["label"]),t(m,{label:e.$t("sysmenu.path"),prop:"path","show-overflow-tooltip":""},null,8,["label"]),t(m,{label:e.$t("sysmenu.menuType"),"show-overflow-tooltip":""},{default:a(o=>[o.row.menuType==="0"?(d(),i(_,{key:0},{default:a(()=>l[3]||(l[3]=[s("\u5DE6\u83DC\u5355")])),_:1})):S("",!0),o.row.menuType==="2"?(d(),i(_,{key:1},{default:a(()=>l[4]||(l[4]=[s("\u9876\u83DC\u5355")])),_:1})):S("",!0),o.row.menuType==="1"?(d(),i(_,{key:2,type:"success"},{default:a(()=>l[5]||(l[5]=[s("\u6309\u94AE")])),_:1})):S("",!0)]),_:1},8,["label"]),t(m,{label:e.$t("sysmenu.keepAlive"),"show-overflow-tooltip":""},{default:a(o=>[o.row.meta.isKeepAlive?(d(),i(_,{key:0},{default:a(()=>l[6]||(l[6]=[s("\u5F00\u542F")])),_:1})):(d(),i(_,{key:1,type:"info"},{default:a(()=>l[7]||(l[7]=[s("\u5173\u95ED")])),_:1}))]),_:1},8,["label"]),t(m,{label:e.$t("sysmenu.permission"),"show-overflow-tooltip":!0,prop:"permission"},null,8,["label"]),t(m,{label:e.$t("common.action"),"show-overflow-tooltip":"",width:"250"},{default:a(o=>[h((d(),i(c,{icon:"folder-add",onClick:O=>V("add",o.row),text:"",type:"primary"},{default:a(()=>[s(p(e.$t("common.addBtn")),1)]),_:2},1032,["onClick"])),[[g,"sys_menu_add"]]),h((d(),i(c,{icon:"edit-pen",onClick:O=>{return k="edit",$=o.row,void C.value.openDialog(k,$);var k,$},text:"",type:"primary"},{default:a(()=>[s(p(e.$t("common.editBtn")),1)]),_:2},1032,["onClick"])),[[g,"sys_menu_edit"]]),t(Z,{icon:"delete",content:e.$t("sysmenu.deleteDisabledTip"),disabled:!P(o.row),placement:"top"},{default:a(()=>[T("span",q,[h((d(),i(c,{icon:"delete",disabled:P(o.row),onClick:O=>(async k=>{try{await oe().confirm(L("common.delConfirmText"))}catch{return}try{await ne(k.id),y(),U().success(L("common.delSuccessText"))}catch($){U().error($.msg)}})(o.row),text:"",type:"primary"},{default:a(()=>[s(p(e.$t("common.delBtn")),1)]),_:2},1032,["disabled","onClick"])),[[g,"sys_menu_del"]])])]),_:2},1032,["content","disabled"])]),_:1},8,["label"])]),_:1},8,["data","cell-style","header-cell-style"])),[[ae,n(u).loading]])]),t(n(M),{onRefresh:l[2]||(l[2]=o=>n(y)()),ref_key:"menuDialogRef",ref:C},null,512)])}}})});export{fe as __tla,H as default};
