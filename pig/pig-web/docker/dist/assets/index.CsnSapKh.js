const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/form.oHMvkV5x.js","assets/table.DpIaW019.js","assets/index.Cli_Cq8U.js","assets/vue.DKOcwzik.js","assets/index.D-bKb_v8.css","assets/table.DByxjNI0.js"])))=>i.map(i=>d[i]);
import{v as D,k as I,e as S,c as O,d as m,z as R,__tla as T}from"./index.Cli_Cq8U.js";import{u as q,a as y,b as F,c as E}from"./table.DByxjNI0.js";import{a as j,aD as L,r as _,y as N,q as M,ae as v,o as P,b as z,e as A,G as o,H as r,U as c,u as i,aC as G}from"./vue.DKOcwzik.js";let b,H=Promise.all([(()=>{try{return T}catch{}})()]).then(async()=>{let u,d;u={class:"layout-padding"},d={class:"layout-padding-auto layout-padding-view"},b=j({__name:"index",setup(U){const k=G(()=>O(()=>import("./form.oHMvkV5x.js"),__vite__mapDeps([0,1,2,3,4,5]))),{t:f}=D.useI18n(),n=L(),s=_(),p=_(),C=N(["tab","card","table","cascader"]),h=N({languageMenu:!1,externalLink:!1,formTemplates:!1,widgetNameReadonly:!1,eventCollapse:!1,clearDesignerButton:!0,previewFormButton:!1,importJsonButton:!1,exportJsonButton:!1,exportCodeButton:!0,generateSFCButton:!1});M(()=>{w()});const w=()=>{const{tableName:t,dsName:e}=n.query;t&&e?q(e,t).then(a=>{s.value.loadJson(a)}):I().confirm("\u8868\u5355\u521D\u59CB\u5316\u5931\u8D25\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9\u8868\u70B9\u51FB\u8BBE\u8BA1\u6253\u5F00").then(()=>{S.emit("onCurrentContextmenuClick",Object.assign({},{contextMenuClickId:1,...n}))})},x=t=>{E(t).then(e=>{s.value.loadJson(JSON.parse(e.data.formInfo)),m().success(f("common.optSuccessText"))})},J=()=>{const{tableName:t,dsName:e}=n.query;if(t&&e){const a=s.value.getFormJson();y({dsName:e,tableName:t,formInfo:JSON.stringify(a)}).then(()=>{m().success(f("common.optSuccessText"))})}},B=async()=>{try{const{tableName:t,dsName:e}=n.query;if(!t||!e)throw new Error("\u8868\u540D\u6216\u6570\u636E\u6E90\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");const a=s.value.getFormJson(),{data:l}=await y({dsName:e,tableName:t,formInfo:JSON.stringify(a)}),g=await F(l.id);R(g,"form.vue")}catch(t){m().error(t.message)}};return(t,e)=>{const a=v("el-button"),l=v("v-form-designer");return P(),z("div",u,[A("div",d,[o(l,{ref_key:"vfDesignerRef",ref:s,"banned-widgets":i(C),"designer-config":i(h)},{customToolButtons:r(()=>[o(a,{link:"",type:"primary",onClick:J},{default:r(()=>e[1]||(e[1]=[c("\u4FDD\u5B58")])),_:1}),o(a,{link:"",type:"primary",onClick:B},{default:r(()=>e[2]||(e[2]=[c("\u5BFC\u51FA")])),_:1}),o(a,{link:"",type:"primary",onClick:e[0]||(e[0]=g=>i(p).openDialog())},{default:r(()=>e[3]||(e[3]=[c("\u5386\u53F2")])),_:1})]),_:1},8,["banned-widgets","designer-config"])]),o(i(k),{ref_key:"formDialogRef",ref:p,onRefresh:x},null,512)])}}})});export{H as __tla,b as default};
