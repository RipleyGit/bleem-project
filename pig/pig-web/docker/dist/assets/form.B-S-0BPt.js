import{v as q,d as v,r as c}from"./index.Cli_Cq8U.js";import{p as L,a as $,g as F,v as j,b as D}from"./post.WKRwJwsW.js";import{a as E,r as g,y as G,ae as m,af as H,o as h,E as V,H as d,Q as O,u as e,G as r,e as P,U as k,V as y,x as Q,t as R}from"./vue.DKOcwzik.js";const z={class:"dialog-footer"},A=E({name:"systemPostDialog",emits:["refresh"],setup(J,{expose:x,emit:T}){const C=T,{t:s}=q.useI18n(),b=g(),u=g(!1),i=g(!1),o=G({postId:"",postCode:"",postName:"",postSort:0,remark:"",delFlag:"",createTime:"",createBy:"",updateTime:"",updateBy:""}),I=g({postCode:[{validator:c.overLength,trigger:"blur"},{required:!0,message:"\u5C97\u4F4D\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:(a,t,p)=>{D(a,t,p,o.postId!=="")},trigger:"blur"}],postName:[{validator:c.overLength,trigger:"blur"},{required:!0,message:"\u5C97\u4F4D\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:(a,t,p)=>{j(a,t,p,o.postId!=="")},trigger:"blur"}],postSort:[{validator:c.overLength,trigger:"blur"},{required:!0,message:"\u5C97\u4F4D\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],remark:[{validator:c.overLength,trigger:"blur"},{required:!0,message:"\u5C97\u4F4D\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),_=async()=>{if(!await b.value.validate().catch(()=>{}))return!1;try{i.value=!0,o.postId?await L(o):await $(o),v().success(s(o.postId?"common.editSuccessText":"common.addSuccessText")),u.value=!1,C("refresh")}catch(a){v().error(a.msg)}finally{i.value=!1}},S=a=>{F(a).then(t=>{Object.assign(o,t.data)})};return x({openDialog:a=>{u.value=!0,o.postId="",R(()=>{var t;(t=b.value)==null||t.resetFields()}),a&&(o.postId=a,S(a))}}),(a,t)=>{const p=m("el-input"),n=m("el-form-item"),N=m("el-input-number"),w=m("el-form"),f=m("el-button"),B=m("el-dialog"),U=H("loading");return h(),V(B,{title:e(o).postId?a.$t("common.editBtn"):a.$t("common.addBtn"),width:"600",modelValue:e(u),"onUpdate:modelValue":t[5]||(t[5]=l=>Q(u)?u.value=l:null),"close-on-click-modal":!1,draggable:""},{footer:d(()=>[P("span",z,[r(f,{onClick:t[4]||(t[4]=l=>u.value=!1)},{default:d(()=>[k(y(a.$t("common.cancelButtonText")),1)]),_:1}),r(f,{type:"primary",onClick:_,disabled:e(i)},{default:d(()=>[k(y(a.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:d(()=>[O((h(),V(w,{ref_key:"dataFormRef",ref:b,model:e(o),rules:e(I),"label-width":"90px"},{default:d(()=>[r(n,{label:e(s)("post.postCode"),prop:"postCode"},{default:d(()=>[r(p,{modelValue:e(o).postCode,"onUpdate:modelValue":t[0]||(t[0]=l=>e(o).postCode=l),placeholder:e(s)("post.inputpostCodeTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:e(s)("post.postName"),prop:"postName"},{default:d(()=>[r(p,{modelValue:e(o).postName,"onUpdate:modelValue":t[1]||(t[1]=l=>e(o).postName=l),placeholder:e(s)("post.inputpostNameTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:e(s)("post.postSort"),prop:"postSort"},{default:d(()=>[r(N,{modelValue:e(o).postSort,"onUpdate:modelValue":t[2]||(t[2]=l=>e(o).postSort=l),placeholder:e(s)("post.inputpostSortTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:e(s)("post.remark"),prop:"remark"},{default:d(()=>[r(p,{type:"textarea",maxlength:"150",rows:"3",modelValue:e(o).remark,"onUpdate:modelValue":t[3]||(t[3]=l=>e(o).remark=l),placeholder:e(s)("post.inputremarkTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[U,e(i)]])]),_:1},8,["title","modelValue"])}}});export{A as default};
