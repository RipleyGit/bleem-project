import{u as H}from"./dict.BLN-_P-8.js";import{v as M,r as n,d as F}from"./index.Cli_Cq8U.js";import{v as O,a as Q,p as z,b as A,g as J}from"./param.BGUdlDLb.js";import{a as W,r as h,y as k,ae as p,af as X,o as i,E as g,H as t,Q as Y,u as e,G as o,b as T,M as C,a8 as I,U as f,V,e as Z,x as ee,t as ae}from"./vue.DKOcwzik.js";import"./dict.DbD4nPEQ.js";const le={class:"dialog-footer"},ue=W({name:"SysPublicParamDialog",emits:["refresh"],setup(te,{expose:K,emit:q}){const N=q,{t:d}=M.useI18n(),_=h(),m=h(!1),v=h(!1),{dict_type:w,status_type:B,param_type:L}=H("dict_type","status_type","param_type"),l=k({publicId:"",publicName:"",publicKey:"",publicValue:"",status:"0",validateCode:"",publicType:"0",systemFlag:"0"}),$=k({publicName:[{validator:n.overLength,trigger:"blur"},{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:(r,a,c)=>{Q(r,a,c,l.publicId!=="")},trigger:"blur"}],publicKey:[{validator:n.overLength,trigger:"blur"},{required:!0,message:"\u53C2\u6570\u952E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:n.validatorCapital,trigger:"blur"},{validator:(r,a,c)=>{O(r,a,c,l.publicId!=="")},trigger:"blur"}],publicValue:[{validator:n.overLength,trigger:"blur"},{required:!0,message:"\u53C2\u6570\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],publicType:[{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],systemFlag:[{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],validateCode:[{validator:n.overLength,trigger:"blur"}]}),D=async()=>{if(!await _.value.validate().catch(()=>{}))return!1;try{v.value=!0,l.publicId?await z(l):await A(l),F().success(d(l.publicId?"common.editSuccessText":"common.addSuccessText")),m.value=!1,N("refresh")}catch(r){F().error(r.msg)}finally{v.value=!1}},S=r=>{J(r).then(a=>{Object.assign(l,a.data)})};return K({openDialog:r=>{m.value=!0,l.publicId="",ae(()=>{var a;(a=_.value)==null||a.resetFields()}),r&&(l.publicId=r,S(r))}}),(r,a)=>{const c=p("el-radio"),U=p("el-radio-group"),s=p("el-form-item"),P=p("el-option"),R=p("el-select"),y=p("el-input"),j=p("el-form"),x=p("el-button"),E=p("el-dialog"),G=X("loading");return i(),g(E,{"close-on-click-modal":!1,title:e(l).publicId?r.$t("common.editBtn"):r.$t("common.addBtn"),width:"600",draggable:"",modelValue:e(m),"onUpdate:modelValue":a[8]||(a[8]=u=>ee(m)?m.value=u:null)},{footer:t(()=>[Z("span",le,[o(x,{onClick:a[7]||(a[7]=u=>m.value=!1)},{default:t(()=>[f(V(r.$t("common.cancelButtonText")),1)]),_:1}),o(x,{onClick:D,type:"primary",disabled:e(v)},{default:t(()=>[f(V(r.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:t(()=>[Y((i(),g(j,{model:e(l),rules:e($),formDialogRef:"","label-width":"90px",ref_key:"dataFormRef",ref:_},{default:t(()=>[o(s,{label:e(d)("param.systemFlag"),prop:"systemFlag"},{default:t(()=>[o(U,{modelValue:e(l).systemFlag,"onUpdate:modelValue":a[0]||(a[0]=u=>e(l).systemFlag=u)},{default:t(()=>[(i(!0),T(C,null,I(e(w),(u,b)=>(i(),g(c,{value:u.value,border:"",key:b},{default:t(()=>[f(V(u.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(s,{label:e(d)("param.publicType"),prop:"publicType"},{default:t(()=>[o(R,{placeholder:e(d)("param.inputpublicTypeTip"),modelValue:e(l).publicType,"onUpdate:modelValue":a[1]||(a[1]=u=>e(l).publicType=u)},{default:t(()=>[(i(!0),T(C,null,I(e(L),(u,b)=>(i(),g(P,{key:b,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["placeholder","modelValue"])]),_:1},8,["label"]),o(s,{label:e(d)("param.validateCode"),prop:"validateCode"},{default:t(()=>[o(y,{placeholder:e(d)("param.inputvalidateCodeTip"),modelValue:e(l).validateCode,"onUpdate:modelValue":a[2]||(a[2]=u=>e(l).validateCode=u)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),o(s,{label:e(d)("param.publicName"),prop:"publicName"},{default:t(()=>[o(y,{placeholder:e(d)("param.inputpublicNameTip"),modelValue:e(l).publicName,"onUpdate:modelValue":a[3]||(a[3]=u=>e(l).publicName=u)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),o(s,{label:e(d)("param.publicKey"),prop:"publicKey"},{default:t(()=>[o(y,{placeholder:e(d)("param.inputpublicKeyTip"),modelValue:e(l).publicKey,"onUpdate:modelValue":a[4]||(a[4]=u=>e(l).publicKey=u)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),o(s,{label:e(d)("param.publicValue"),prop:"publicValue"},{default:t(()=>[o(y,{placeholder:e(d)("param.inputpublicValueTip"),modelValue:e(l).publicValue,"onUpdate:modelValue":a[5]||(a[5]=u=>e(l).publicValue=u)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),o(s,{label:e(d)("param.status"),prop:"status"},{default:t(()=>[o(U,{modelValue:e(l).status,"onUpdate:modelValue":a[6]||(a[6]=u=>e(l).status=u)},{default:t(()=>[(i(!0),T(C,null,I(e(B),(u,b)=>(i(),g(c,{value:u.value,border:"",key:b},{default:t(()=>[f(V(u.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[G,e(v)]])]),_:1},8,["title","modelValue"])}}});export{ue as default};
