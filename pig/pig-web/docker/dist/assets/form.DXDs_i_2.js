import{u as E}from"./dict.BLN-_P-8.js";import{v as H,d as S,r as s}from"./index.Cli_Cq8U.js";import{p as M,a as W,g as J,v as K}from"./client.Bt4nbjRC.js";import{a as N,r as h,y as P,ae as u,af as X,o as c,E as m,H as i,Q as Y,u as e,G as o,b as U,M as w,a8 as z,U as f,V as y,S as T,e as Z,x as ee,t as ae}from"./vue.DKOcwzik.js";import"./dict.DbD4nPEQ.js";const le={class:"dialog-footer"},te=N({name:"SysOauthClientDetailsDialog",emits:["refresh"],setup(re,{expose:R,emit:G}){const I=G,{t:r}=H.useI18n(),v=h(),g=h(!1),b=h(!1),{grant_types:L,common_status:q}=E("grant_types","common_status"),a=P({id:"",clientId:"",clientSecret:"",scope:"server",authorizedGrantTypes:[],webServerRedirectUri:"",authorities:"",accessTokenValidity:43200,refreshTokenValidity:2592001,autoapprove:"true",delFlag:"",createBy:"",updateBy:"",createTime:"",updateTime:"",tenantId:"",onlineQuantity:"1",captchaFlag:"1",encFlag:"1"}),x=h({clientId:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:s.validatorLowercase,trigger:"blur"},{validator:(d,l,p)=>{K(d,l,p,a.id!=="")},trigger:"blur"}],clientSecret:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5BC6\u94A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:s.validatorLower,trigger:"blur"}],scope:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u57DF\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],authorizedGrantTypes:[{required:!0,message:"\u6388\u6743\u6A21\u5F0F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],accessTokenValidity:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u4EE4\u724C\u65F6\u6548\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{type:"number",min:1,message:"\u4EE4\u724C\u65F6\u6548\u4E0D\u80FD\u5C0F\u4E8E\u4E00\u5C0F\u65F6",trigger:"blur"}],refreshTokenValidity:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5237\u65B0\u65F6\u6548\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{type:"number",min:1,message:"\u5237\u65B0\u65F6\u6548\u4E0D\u80FD\u5C0F\u4E8E\u4E24\u5C0F\u65F6",trigger:"blur"}],autoapprove:[{required:!0,message:"\u81EA\u52A8\u653E\u884C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],webServerRedirectUri:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u56DE\u8C03\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],authorities:[{validator:s.overLength,trigger:"blur"}]}),B=async()=>{if(!await v.value.validate().catch(()=>{}))return!1;try{b.value=!0,a.id?await M(a):await W(a),S().success(r(a.id?"common.editSuccessText":"common.addSuccessText")),g.value=!1,I("refresh")}catch(d){S().error(d.msg)}finally{b.value=!1}},C=d=>{J(d).then(l=>{Object.assign(a,l.data)})};return R({openDialog:d=>{g.value=!0,a.id="",ae(()=>{var l;(l=v.value)==null||l.resetFields()}),d&&(a.id=d,C(d))}}),(d,l)=>{const p=u("el-input"),n=u("el-form-item"),F=u("el-option"),D=u("el-select"),_=u("el-input-number"),$=u("el-radio"),A=u("el-radio-group"),O=u("el-form"),k=u("el-button"),j=u("el-dialog"),Q=X("loading");return c(),m(j,{"close-on-click-modal":!1,title:e(a).id?d.$t("common.editBtn"):d.$t("common.addBtn"),width:"600",draggable:"",modelValue:e(g),"onUpdate:modelValue":l[10]||(l[10]=t=>ee(g)?g.value=t:null)},{footer:i(()=>[Z("span",le,[o(k,{onClick:l[9]||(l[9]=t=>g.value=!1)},{default:i(()=>[f(y(d.$t("common.cancelButtonText")),1)]),_:1}),o(k,{onClick:B,type:"primary",disabled:e(b)},{default:i(()=>[f(y(d.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:i(()=>[Y((c(),m(O,{model:e(a),rules:e(x),formDialogRef:"","label-width":"120px",ref_key:"dataFormRef",ref:v},{default:i(()=>[o(n,{label:e(r)("client.clientId"),prop:"clientId"},{default:i(()=>[o(p,{placeholder:e(r)("client.inputClientIdTip"),modelValue:e(a).clientId,"onUpdate:modelValue":l[0]||(l[0]=t=>e(a).clientId=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),o(n,{label:e(r)("client.clientSecret"),prop:"clientSecret"},{default:i(()=>[o(p,{placeholder:e(r)("client.inputClientSecretTip"),modelValue:e(a).clientSecret,"onUpdate:modelValue":l[1]||(l[1]=t=>e(a).clientSecret=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),o(n,{label:e(r)("client.scope"),prop:"scope"},{default:i(()=>[o(p,{placeholder:e(r)("client.inputScopeTip"),modelValue:e(a).scope,"onUpdate:modelValue":l[2]||(l[2]=t=>e(a).scope=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),o(n,{label:e(r)("client.authorizedGrantTypes"),prop:"authorizedGrantTypes"},{default:i(()=>[o(D,{"collapse-tags":"","collapse-tags-tooltip":"",multiple:"",modelValue:e(a).authorizedGrantTypes,"onUpdate:modelValue":l[3]||(l[3]=t=>e(a).authorizedGrantTypes=t)},{default:i(()=>[(c(!0),U(w,null,z(e(L),(t,V)=>(c(),m(F,{key:V,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(n,{label:e(r)("client.accessTokenValidity"),prop:"accessTokenValidity"},{default:i(()=>[o(_,{placeholder:e(r)("client.inputAccessTokenValidityTip"),modelValue:e(a).accessTokenValidity,"onUpdate:modelValue":l[4]||(l[4]=t=>e(a).accessTokenValidity=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),o(n,{label:e(r)("client.refreshTokenValidity"),prop:"refreshTokenValidity"},{default:i(()=>[o(_,{placeholder:e(r)("client.inputRefreshTokenValidityTip"),modelValue:e(a).refreshTokenValidity,"onUpdate:modelValue":l[5]||(l[5]=t=>e(a).refreshTokenValidity=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),e(a).authorizedGrantTypes.includes("authorization_code")?(c(),m(n,{key:0,label:e(r)("client.autoapprove"),prop:"autoapprove"},{default:i(()=>[o(A,{modelValue:e(a).autoapprove,"onUpdate:modelValue":l[6]||(l[6]=t=>e(a).autoapprove=t)},{default:i(()=>[(c(!0),U(w,null,z(e(q),(t,V)=>(c(),m($,{key:V,value:t.value,border:""},{default:i(()=>[f(y(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])):T("",!0),e(a).authorizedGrantTypes.includes("authorization_code")?(c(),m(n,{key:1,label:e(r)("client.authorities"),prop:"authorities"},{default:i(()=>[o(p,{placeholder:e(r)("client.inputAuthoritiesTip"),modelValue:e(a).authorities,"onUpdate:modelValue":l[7]||(l[7]=t=>e(a).authorities=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])):T("",!0),e(a).authorizedGrantTypes.includes("authorization_code")?(c(),m(n,{key:2,label:e(r)("client.webServerRedirectUri"),prop:"webServerRedirectUri"},{default:i(()=>[o(p,{placeholder:e(r)("client.inputWebServerRedirectUriTip"),modelValue:e(a).webServerRedirectUri,"onUpdate:modelValue":l[8]||(l[8]=t=>e(a).webServerRedirectUri=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])):T("",!0)]),_:1},8,["model","rules"])),[[Q,e(b)]])]),_:1},8,["title","modelValue"])}}});export{te as default};
