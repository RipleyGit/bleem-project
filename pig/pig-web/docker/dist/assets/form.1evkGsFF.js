import{v as E,r as y,d as V}from"./index.Cli_Cq8U.js";import{b as G,c as H,e as j,h as I}from"./dict.DbD4nPEQ.js";import{u as M}from"./dict.BLN-_P-8.js";import{a as N,r as b,y as T,ae as i,af as O,o as c,b as _,G as r,H as d,Q,E as $,u as t,M as z,a8 as A,U as f,V as v,e as J,x as K,t as P}from"./vue.DKOcwzik.js";const W={class:"system-dic-dialog-container"},X={class:"dialog-footer"},Y=N({name:"systemDicDialog",emits:["refresh"],setup(Z,{expose:k,emit:x}){const F=x,{dict_type:w}=M("dict_type"),{t:D}=E.useI18n(),n=b(),o=b(!1),u=b(!1),l=T({id:"",dictType:"",description:"",systemFlag:"0",remarks:""}),U=T({dictType:[{validator:y.overLength,trigger:"blur"},{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:y.validatorNameCn,trigger:"blur"},{validator:(e,a,p)=>{G(e,a,p,l.id!=="")},trigger:"blur"}],systemFlag:[{required:!0,message:"\u5B57\u5178\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],description:[{validator:y.overLength,trigger:"blur"},{required:!0,message:"\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),B=async()=>{if(!await n.value.validate().catch(()=>{}))return!1;try{u.value=!0;const e=l.id?await j(l):await I(l);V().success(D(l.id?"common.editSuccessText":"common.addSuccessText")),o.value=!1,F("refresh",e.data)}catch(e){V().error(e.msg)}finally{u.value=!1}};return k({openDialog:e=>{o.value=!0,l.id="",P(()=>{var a;(a=n.value)==null||a.resetFields()}),e&&H(e).then(a=>{Object.assign(l,a.data)})}}),(e,a)=>{const p=i("el-radio"),q=i("el-radio-group"),m=i("el-form-item"),g=i("el-input"),C=i("el-form"),h=i("el-button"),L=i("el-dialog"),R=O("loading");return c(),_("div",W,[r(L,{title:t(l).id?e.$t("common.editBtn"):e.$t("common.addBtn"),modelValue:t(o),"onUpdate:modelValue":a[5]||(a[5]=s=>K(o)?o.value=s:null),width:"600"},{footer:d(()=>[J("span",X,[r(h,{onClick:a[4]||(a[4]=s=>o.value=!1)},{default:d(()=>[f(v(e.$t("common.cancelButtonText")),1)]),_:1}),r(h,{onClick:B,type:"primary",disabled:t(u)},{default:d(()=>[f(v(e.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:d(()=>[Q((c(),$(C,{model:t(l),rules:t(U),"label-width":"90px",ref_key:"dicDialogFormRef",ref:n},{default:d(()=>[r(m,{label:e.$t("sysdict.systemFlag"),prop:"systemFlag"},{default:d(()=>[r(q,{modelValue:t(l).systemFlag,"onUpdate:modelValue":a[0]||(a[0]=s=>t(l).systemFlag=s)},{default:d(()=>[(c(!0),_(z,null,A(t(w),(s,S)=>(c(),$(p,{border:"",key:S,value:s.value},{default:d(()=>[f(v(s.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),r(m,{label:e.$t("sysdict.dictType"),prop:"dictType"},{default:d(()=>[r(g,{placeholder:e.$t("sysdict.inputDictTypeTip"),disabled:t(l).id!=="",clearable:"",modelValue:t(l).dictType,"onUpdate:modelValue":a[1]||(a[1]=s=>t(l).dictType=s)},null,8,["placeholder","disabled","modelValue"])]),_:1},8,["label"]),r(m,{label:e.$t("sysdict.description"),prop:"description"},{default:d(()=>[r(g,{placeholder:e.$t("sysdict.inputDescriptionTip"),clearable:"",modelValue:t(l).description,"onUpdate:modelValue":a[2]||(a[2]=s=>t(l).description=s)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),r(m,{label:e.$t("sysdict.remarks"),prop:"remarks"},{default:d(()=>[r(g,{type:"textarea",maxlength:"150",rows:"3",placeholder:e.$t("sysdict.inputRemarksTip"),modelValue:t(l).remarks,"onUpdate:modelValue":a[3]||(a[3]=s=>t(l).remarks=s)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[R,t(u)]])]),_:1},8,["title","modelValue"])])}}});export{Y as default};
