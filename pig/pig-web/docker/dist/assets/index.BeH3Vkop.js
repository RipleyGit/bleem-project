const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/form.BUnfSaha.js","assets/index.Cli_Cq8U.js","assets/vue.DKOcwzik.js","assets/index.D-bKb_v8.css","assets/dict.BLN-_P-8.js","assets/dict.DbD4nPEQ.js","assets/job.Cbg8pzrU.js","assets/job-log.DprDiLTg.js","assets/table.DpIaW019.js"])))=>i.map(i=>d[i]);
import{v as je,c as H,d as p,k,__tla as ye}from"./index.Cli_Cq8U.js";import{a as he,r as S,y as O,ae as c,af as Q,o as n,b as $,e as A,Q as _,W as _e,u as e,G as o,H as t,ap as fe,M as J,a8 as M,E as m,U as j,V as v,x as we,S as W,K as ve,aC as X}from"./vue.DKOcwzik.js";import{u as xe}from"./table.DpIaW019.js";import{f as Se,s as ge,b as Ce,r as ke,d as Te}from"./job.Cbg8pzrU.js";import{u as Ee}from"./dict.BLN-_P-8.js";import"./dict.DbD4nPEQ.js";let Y,Ne=Promise.all([(()=>{try{return ye}catch{}})()]).then(async()=>{let q,F,P;q={class:"layout-padding"},F={class:"layout-padding-auto layout-padding-view"},P={class:"mb8",style:{width:"100%"}},Y=he({name:"systemSysJob",setup(Ve){const Z=X(()=>H(()=>import("./form.BUnfSaha.js").then(async s=>(await s.__tla,s)),__vite__mapDeps([0,1,2,3,4,5,6]))),ee=X(()=>H(()=>import("./job-log.DprDiLTg.js"),__vite__mapDeps([7,8,1,2,3,4,5]))),{t:a}=je.useI18n(),T=S(),I=S(),E=O({jobName:"",jobGroup:"",jobStatus:"",jobExecuteStatus:""}),g=S(!0),B=S([]),D=S(!0),{job_status:R,job_execute_status:L,misfire_policy:oe,job_type:le}=Ee("job_status","job_execute_status","misfire_policy","job_type"),b=O({queryForm:E,pageList:Se}),{getDataList:y,currentChangeHandle:te,sizeChangeHandle:ae,downBlobFile:re,tableStyle:U}=xe(b),se=()=>{Object.keys(E).forEach(s=>E[s]=""),y()},ue=s=>{B.value=s,D.value=!s.length},ie=()=>{re("/job/sys-job/export",b.queryForm,"job.xlsx")},N=async s=>{if(!s)return void B.value.forEach(N);const{jobId:r,jobName:V}=s;try{await k().confirm(`${a("common.delConfirmText")}(\u4EFB\u52A1\u540D\u79F0:${V})`)}catch{return}try{await Te(r),y(),p().success(a("common.delSuccessText"))}catch{p().error("\u5220\u9664\u5931\u8D25")}};return(s,r)=>{const V=c("el-input"),x=c("el-form-item"),z=c("el-option"),G=c("el-select"),d=c("el-button"),ne=c("el-form"),K=c("el-row"),be=c("right-toolbar"),u=c("el-table-column"),C=c("dict-tag"),ce=c("el-table"),pe=c("pagination"),w=Q("auth"),de=Q("loading");return n(),$("div",q,[A("div",F,[_(o(K,{class:"ml10"},{default:t(()=>[o(ne,{inline:!0,model:e(b).queryForm,ref:"queryRef"},{default:t(()=>[o(x,{label:s.$t("job.jobName"),prop:"jobName"},{default:t(()=>[o(V,{placeholder:s.$t("job.inputjobNameTip"),onKeyup:fe(e(y),["enter"]),clearable:"",modelValue:e(b).queryForm.jobName,"onUpdate:modelValue":r[0]||(r[0]=l=>e(b).queryForm.jobName=l)},null,8,["placeholder","onKeyup","modelValue"])]),_:1},8,["label"]),o(x,{label:e(a)("job.jobStatus"),prop:"jobStatus"},{default:t(()=>[o(G,{placeholder:e(a)("job.inputjobStatusTip"),modelValue:e(b).queryForm.jobStatus,"onUpdate:modelValue":r[1]||(r[1]=l=>e(b).queryForm.jobStatus=l)},{default:t(()=>[(n(!0),$(J,null,M(e(R),(l,h)=>(n(),m(z,{key:h,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["placeholder","modelValue"])]),_:1},8,["label"]),o(x,{label:e(a)("job.jobExecuteStatus"),prop:"jobExecuteStatus"},{default:t(()=>[o(G,{placeholder:e(a)("job.inputjobExecuteStatusTip"),modelValue:e(b).queryForm.jobExecuteStatus,"onUpdate:modelValue":r[2]||(r[2]=l=>e(b).queryForm.jobExecuteStatus=l)},{default:t(()=>[(n(!0),$(J,null,M(e(L),(l,h)=>(n(),m(z,{key:h,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["placeholder","modelValue"])]),_:1},8,["label"]),o(x,null,{default:t(()=>[o(d,{onClick:e(y),icon:"Search",type:"primary"},{default:t(()=>[j(v(s.$t("common.queryBtn")),1)]),_:1},8,["onClick"]),o(d,{onClick:se,icon:"Refresh"},{default:t(()=>[j(v(s.$t("common.resetBtn")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},512),[[_e,e(g)]]),o(K,null,{default:t(()=>[A("div",P,[_((n(),m(d,{onClick:r[3]||(r[3]=l=>e(T).openDialog()),class:"ml10",icon:"folder-add",type:"primary"},{default:t(()=>[j(v(s.$t("common.addBtn")),1)]),_:1})),[[w,"job_sys_job_add"]]),_((n(),m(d,{plain:"",disabled:e(D),onClick:r[4]||(r[4]=l=>N(void 0)),class:"ml10",icon:"Delete",type:"primary"},{default:t(()=>[j(v(s.$t("common.delBtn")),1)]),_:1},8,["disabled"])),[[w,"job_sys_job_del"]]),o(be,{export:"job_sys_job_add",onExportExcel:ie,onQueryTable:e(y),class:"ml10",style:{float:"right","margin-right":"20px"},showSearch:e(g),"onUpdate:showSearch":r[5]||(r[5]=l=>we(g)?g.value=l:null)},null,8,["onQueryTable","showSearch"])])]),_:1}),_((n(),m(ce,{data:e(b).dataList,onSelectionChange:ue,style:{width:"100%"},border:"","cell-style":e(U).cellStyle,"header-cell-style":e(U).headerCellStyle},{default:t(()=>[o(u,{align:"center",type:"selection",width:"40"}),o(u,{label:e(a)("job.index"),fixed:"left",type:"index",width:"60"},null,8,["label"]),o(u,{label:e(a)("job.jobName"),fixed:"left",prop:"jobName","show-overflow-tooltip":"",width:"120"},null,8,["label"]),o(u,{label:e(a)("job.jobGroup"),prop:"jobGroup","show-overflow-tooltip":"",width:"120"},null,8,["label"]),o(u,{label:e(a)("job.jobStatus"),prop:"jobStatus","show-overflow-tooltip":"",width:"120"},{default:t(l=>[o(C,{options:e(R),value:l.row.jobStatus},null,8,["options","value"])]),_:1},8,["label"]),o(u,{label:e(a)("job.jobExecuteStatus"),prop:"jobExecuteStatus","show-overflow-tooltip":"",width:"120"},{default:t(l=>[o(C,{options:e(L),value:l.row.jobExecuteStatus},null,8,["options","value"])]),_:1},8,["label"]),o(u,{label:e(a)("job.startTime"),prop:"startTime","show-overflow-tooltip":"",width:"120"},null,8,["label"]),o(u,{label:e(a)("job.previousTime"),prop:"previousTime","show-overflow-tooltip":"",width:"120"},null,8,["label"]),o(u,{label:e(a)("job.nextTime"),prop:"nextTime","show-overflow-tooltip":"",width:"120"},null,8,["label"]),o(u,{label:e(a)("job.jobType"),prop:"jobType","show-overflow-tooltip":"",width:"120"},{default:t(l=>[o(C,{options:e(le),value:l.row.jobType},null,8,["options","value"])]),_:1},8,["label"]),o(u,{label:e(a)("job.executePath"),prop:"executePath","show-overflow-tooltip":"",width:"120"},null,8,["label"]),o(u,{label:e(a)("job.className"),prop:"className","show-overflow-tooltip":"",width:"120"},null,8,["label"]),o(u,{label:e(a)("job.methodName"),prop:"methodName","show-overflow-tooltip":"",width:"120"},null,8,["label"]),o(u,{label:e(a)("job.methodParamsValue"),prop:"methodParamsValue","show-overflow-tooltip":"",width:"120"},null,8,["label"]),o(u,{label:e(a)("job.cronExpression"),prop:"cronExpression","show-overflow-tooltip":"",width:"120"},null,8,["label"]),o(u,{label:e(a)("job.misfirePolicy"),prop:"misfirePolicy","show-overflow-tooltip":"",width:"200"},{default:t(l=>[o(C,{options:e(oe),value:l.row.misfirePolicy},null,8,["options","value"])]),_:1},8,["label"]),o(u,{label:s.$t("common.action"),fixed:"right",width:"300"},{default:t(l=>[o(d,{onClick:h=>{return i=l.row,void I.value.openDialog(i.jobId);var i},text:"",type:"primary"},{default:t(()=>r[7]||(r[7]=[j("\u65E5\u5FD7")])),_:2},1032,["onClick"]),l.row.jobStatus!=="2"?_((n(),m(d,{key:0,onClick:h=>(async i=>{const f=i.jobStatus;if(f==="1"||f==="3"){try{await k().confirm(`\u5373\u5C06\u53D1\u5E03\u6216\u542F\u52A8(\u4EFB\u52A1\u540D\u79F0: ${i.jobName}), \u662F\u5426\u7EE7\u7EED?`)}catch{return}try{await ge(i.jobId),y(),p().success(a("common.optSuccessText"))}catch(me){p().error(me.msg)}}else p().error("\u5B9A\u65F6\u4EFB\u52A1\u5DF2\u8FD0\u884C")})(l.row),text:"",type:"primary"},{default:t(()=>r[8]||(r[8]=[j("\u542F\u52A8 ")])),_:2},1032,["onClick"])),[[w,"job_sys_job_start_job"]]):W("",!0),l.row.jobStatus==="2"?_((n(),m(d,{key:1,onClick:h=>(async i=>{if(i.jobStatus==="2"){try{await k().confirm(`\u5373\u5C06\u6682\u505C(\u4EFB\u52A1\u540D\u79F0: ${i.jobName}), \u662F\u5426\u7EE7\u7EED?`)}catch{return}try{await Ce(i.jobId),y(),p().success(a("common.optSuccessText"))}catch(f){p().error(f.msg)}}else p().error("\u5DF2\u6682\u505C\uFF0C\u4E0D\u8981\u91CD\u590D\u64CD\u4F5C")})(l.row),text:"",type:"primary"},{default:t(()=>r[9]||(r[9]=[j("\u6682\u505C ")])),_:2},1032,["onClick"])),[[w,"job_sys_job_shutdown_job"]]):W("",!0),_((n(),m(d,{onClick:h=>(i=>{const f=i.jobStatus;f==="1"||f==="3"?T.value.openDialog(i.jobId):p().error("\u8FD0\u884C\u4E2D\u5B9A\u65F6\u4EFB\u52A1\u4E0D\u53EF\u4FEE\u6539\uFF0C\u8BF7\u5148\u6682\u505C\u540E\u64CD\u4F5C")})(l.row),text:"",type:"primary"},{default:t(()=>[j(v(s.$t("common.editBtn")),1)]),_:2},1032,["onClick"])),[[w,"job_sys_job_edit"]]),_((n(),m(d,{onClick:h=>(async i=>{try{await k().confirm(`\u7ACB\u523B\u6267\u884C\u4E00\u6B21\u4EFB\u52A1(\u4EFB\u52A1\u540D\u79F0: ${i.jobName}), \u662F\u5426\u7EE7\u7EED?`)}catch{return}try{await ke(i.jobId),y(),p().success(a("common.optSuccessText"))}catch{p().error("\u8FD0\u884C\u5931\u8D25")}})(l.row),text:"",type:"primary"},{default:t(()=>r[10]||(r[10]=[j("\u6267\u884C")])),_:2},1032,["onClick"])),[[w,"job_sys_job_start_job"]]),_((n(),m(d,{onClick:h=>N(l.row),text:"",type:"primary"},{default:t(()=>[j(v(s.$t("common.delBtn")),1)]),_:2},1032,["onClick"])),[[w,"job_sys_job_del"]])]),_:1},8,["label"])]),_:1},8,["data","cell-style","header-cell-style"])),[[de,e(b).loading]]),o(pe,ve({onCurrentChange:e(te),onSizeChange:e(ae)},e(b).pagination),null,16,["onCurrentChange","onSizeChange"])]),o(e(Z),{onRefresh:r[6]||(r[6]=l=>e(y)()),ref_key:"formDialogRef",ref:T},null,512),o(e(ee),{ref_key:"jobLogRef",ref:I},null,512)])}}})});export{Ne as __tla,Y as default};
