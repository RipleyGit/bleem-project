const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.Dw0s_JPB.js","assets/index.Cli_Cq8U.js","assets/vue.DKOcwzik.js","assets/index.D-bKb_v8.css","assets/index.B9s4Ea2a.css"])))=>i.map(i=>d[i]);
import{v as R,r as y,c as G,n as H,p as M,q as Q,t as W,d as $,__tla as z}from"./index.Cli_Cq8U.js";import{a as J,r as v,y as I,ae as s,af as K,o as i,E as p,H as u,Q as X,u as r,G as t,U as n,S as b,e as Y,V as k,x as Z,aC as ee,t as ae}from"./vue.DKOcwzik.js";let U,re=Promise.all([(()=>{try{return z}catch{}})()]).then(async()=>{let V;V={class:"dialog-footer"},U=J({name:"systemMenuDialog",emits:["refresh"],setup(le,{expose:w,emit:x}){const q=x,{t:D}=R.useI18n(),N=ee(()=>G(()=>import("./index.Dw0s_JPB.js").then(async l=>(await l.__tla,l)),__vite__mapDeps([0,1,2,3,4]))),c=v(!1),h=v(!1),_=v(),a=I({ruleForm:{menuId:"",name:"",enName:"",permission:"",parentId:"",icon:"",path:"",sortOrder:0,menuType:"1",keepAlive:"0",visible:"1",embedded:"0"},parentData:[]}),O=I({menuType:[{required:!0,message:"\u83DC\u5355\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],parentId:[{required:!0,message:"\u4E0A\u7EA7\u83DC\u5355\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{validator:y.overLength,trigger:"blur"},{required:!0,message:"\u83DC\u5355\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],path:[{validator:y.overLength,trigger:"blur"},{required:!0,message:"\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],icon:[{required:!0,message:"\u56FE\u6807\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],permission:[{validator:y.overLength,trigger:"blur"},{required:!0,message:"\u6743\u9650\u4EE3\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sortOrder:[{validator:y.overLength,trigger:"blur"},{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],enName:[{validator:y.overLength,trigger:"blur"}]}),A=l=>{H(l).then(e=>{Object.assign(a.ruleForm,e.data)})},L=()=>{a.parentData=[],M({type:"0"}).then(l=>{let e={id:"-1",name:"\u6839\u83DC\u5355",children:[]};e.children=l.data,a.parentData.push(e)})},P=async()=>{if(!await _.value.validate().catch(()=>{}))return!1;try{h.value=!0,a.ruleForm.menuId?await Q(a.ruleForm):await W(a.ruleForm),$().success(D(a.ruleForm.menuId?"common.editSuccessText":"common.addSuccessText")),c.value=!1,q("refresh")}catch(l){$().error(l.msg)}finally{h.value=!1}};return w({openDialog:async(l,e)=>{var m;a.ruleForm.menuId="",c.value=!0,await ae(),(m=_.value)==null||m.resetFields(),a.ruleForm.parentId=(e==null?void 0:e.id)||"-1",a.ruleForm.path="",a.ruleForm.permission="",e!=null&&e.id&&l==="edit"&&(a.ruleForm.menuId=e.id,await A(e.id)),await L()}}),(l,e)=>{const m=s("el-radio"),f=s("el-radio-group"),d=s("el-form-item"),B=s("el-tree-select"),F=s("el-input"),E=s("el-input-number"),C=s("el-form"),T=s("el-button"),S=s("el-dialog"),j=K("loading");return i(),p(S,{title:r(a).ruleForm.menuId?l.$t("common.editBtn"):l.$t("common.addBtn"),width:"600",modelValue:r(c),"onUpdate:modelValue":e[12]||(e[12]=g=>Z(c)?c.value=g:null),"close-on-click-modal":!1,draggable:""},{footer:u(()=>[Y("span",V,[t(T,{onClick:e[11]||(e[11]=g=>c.value=!1)},{default:u(()=>[n(k(l.$t("common.cancelButtonText")),1)]),_:1}),t(T,{type:"primary",onClick:P,disabled:r(h)},{default:u(()=>[n(k(l.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:u(()=>[X((i(),p(C,{ref_key:"menuDialogFormRef",ref:_,model:r(a).ruleForm,rules:r(O),"label-width":"90px"},{default:u(()=>{var g;return[t(d,{label:l.$t("sysmenu.menuType"),prop:"menuType"},{default:u(()=>[t(f,{modelValue:r(a).ruleForm.menuType,"onUpdate:modelValue":e[0]||(e[0]=o=>r(a).ruleForm.menuType=o)},{default:u(()=>[t(m,{border:"",value:"0"},{default:u(()=>e[13]||(e[13]=[n("\u83DC\u5355")])),_:1}),t(m,{border:"",value:"1"},{default:u(()=>e[14]||(e[14]=[n("\u6309\u94AE")])),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(d,{label:l.$t("sysmenu.parentId"),prop:"parentId"},{default:u(()=>[t(B,{modelValue:r(a).ruleForm.parentId,"onUpdate:modelValue":e[1]||(e[1]=o=>r(a).ruleForm.parentId=o),data:r(a).parentData,"render-after-expand":!1,props:{value:"id",label:"name",children:"children"},class:"w100",clearable:"","check-strictly":"",placeholder:l.$t("sysmenu.inputParentIdTip")},null,8,["modelValue","data","placeholder"])]),_:1},8,["label"]),t(d,{label:l.$t("sysmenu.name"),prop:"name"},{default:u(()=>[t(F,{modelValue:r(a).ruleForm.name,"onUpdate:modelValue":e[2]||(e[2]=o=>r(a).ruleForm.name=o),clearable:"",placeholder:l.$t("sysmenu.inputNameTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(d,{label:l.$t("sysmenu.enName"),prop:"enName"},{default:u(()=>[t(F,{modelValue:r(a).ruleForm.enName,"onUpdate:modelValue":e[3]||(e[3]=o=>r(a).ruleForm.enName=o),clearable:"",placeholder:l.$t("sysmenu.inputEnNameTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(a).ruleForm.menuType==="0"?(i(),p(d,{key:0,label:l.$t("sysmenu.path"),prop:"path"},{default:u(()=>[t(F,{modelValue:r(a).ruleForm.path,"onUpdate:modelValue":e[4]||(e[4]=o=>r(a).ruleForm.path=o),placeholder:l.$t("sysmenu.inputPathTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):b("",!0),r(a).ruleForm.menuType==="1"?(i(),p(d,{key:1,label:l.$t("sysmenu.permission"),prop:"permission"},{default:u(()=>[t(F,{modelValue:r(a).ruleForm.permission,"onUpdate:modelValue":e[5]||(e[5]=o=>r(a).ruleForm.permission=o),maxlength:"50",placeholder:l.$t("sysmenu.inputPermissionTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):b("",!0),t(d,{label:l.$t("sysmenu.sortOrder"),prop:"sortOrder"},{default:u(()=>[t(E,{modelValue:r(a).ruleForm.sortOrder,"onUpdate:modelValue":e[6]||(e[6]=o=>r(a).ruleForm.sortOrder=o),min:0,"controls-position":"right"},null,8,["modelValue"])]),_:1},8,["label"]),r(a).ruleForm.menuType==="0"?(i(),p(d,{key:2,label:l.$t("sysmenu.icon"),prop:"icon"},{default:u(()=>[t(r(N),{placeholder:l.$t("sysmenu.inputIconTip"),modelValue:r(a).ruleForm.icon,"onUpdate:modelValue":e[7]||(e[7]=o=>r(a).ruleForm.icon=o)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])):b("",!0),r(a).ruleForm.menuType==="0"&&((g=r(a).ruleForm.path)!=null&&g.startsWith("http"))?(i(),p(d,{key:3,label:l.$t("sysmenu.embedded"),prop:"embedded"},{default:u(()=>[t(f,{modelValue:r(a).ruleForm.embedded,"onUpdate:modelValue":e[8]||(e[8]=o=>r(a).ruleForm.embedded=o)},{default:u(()=>[t(m,{border:"",value:"0"},{default:u(()=>e[15]||(e[15]=[n("\u5426")])),_:1}),t(m,{border:"",value:"1"},{default:u(()=>e[16]||(e[16]=[n("\u662F")])),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):b("",!0),r(a).ruleForm.menuType==="0"?(i(),p(d,{key:4,label:l.$t("sysmenu.keepAlive"),prop:"keepAlive"},{default:u(()=>[t(f,{modelValue:r(a).ruleForm.keepAlive,"onUpdate:modelValue":e[9]||(e[9]=o=>r(a).ruleForm.keepAlive=o)},{default:u(()=>[t(m,{border:"",value:"0"},{default:u(()=>e[17]||(e[17]=[n("\u5426")])),_:1}),t(m,{border:"",value:"1"},{default:u(()=>e[18]||(e[18]=[n("\u662F")])),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):b("",!0),r(a).ruleForm.menuType==="0"?(i(),p(d,{key:5,label:l.$t("sysmenu.visible"),prop:"visible"},{default:u(()=>[t(f,{modelValue:r(a).ruleForm.visible,"onUpdate:modelValue":e[10]||(e[10]=o=>r(a).ruleForm.visible=o)},{default:u(()=>[t(m,{border:"",value:"0"},{default:u(()=>e[19]||(e[19]=[n("\u5426")])),_:1}),t(m,{border:"",value:"1"},{default:u(()=>e[20]||(e[20]=[n("\u662F")])),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):b("",!0)]}),_:1},8,["model","rules"])),[[j,r(h)]])]),_:1},8,["title","modelValue"])}}})});export{re as __tla,U as default};
