import{a as c,r as I,aD as O,f as o,p as u,af as k,o as n,b as l,e as v,M as w,a8 as b,u as p,Q as h,G as _,H as K,W as P,as as S,t as x}from"./vue.DKOcwzik.js";const A={class:"layout-padding layout-padding-unset layout-iframe"},D={class:"layout-padding-auto layout-padding-view"},E=["src","data-url"],G=c({name:"layoutIframeView",props:{refreshKey:{type:String,default:()=>""},name:{type:String,default:()=>"slide-right"},list:{type:Array,default:()=>[]}},setup(m){const i=m,f=I(),r=O(),y=o(()=>i.list.filter(a=>{var e;return(e=a.meta)==null?void 0:e.isIframeOpen})),g=o(()=>r.path),d=(a,e)=>{x(()=>{if(!f.value)return!1;f.value.forEach(s=>{s.dataset.url===a&&(s.onload=()=>{var t;(t=e.meta)!=null&&t.isIframeOpen&&e.meta.loading&&(e.meta.loading=!1)})})})};return u(()=>r.fullPath,a=>{const e=i.list.find(s=>s.path===a);if(!e)return!1;e.meta.isIframeOpen||(e.meta.isIframeOpen=!0),d(a,e)},{immediate:!0}),u(()=>i.refreshKey,()=>{const a=i.list.find(e=>e.path===r.path);if(!a)return!1;a.meta.isIframeOpen&&(a.meta.isIframeOpen=!1),setTimeout(()=>{a.meta.isIframeOpen=!0,a.meta.loading=!0,d(r.fullPath,a)})},{deep:!0}),(a,e)=>{const s=k("loading");return n(),l("div",A,[v("div",D,[(n(!0),l(w,null,b(p(y),t=>h((n(),l("div",{class:"w100",key:t.path,"element-loading-background":"white"},[_(S,{name:m.name},{default:K(()=>[h((n(),l("iframe",{src:t.meta.isLink,key:t.path,frameborder:"0",height:"100%",width:"100%",style:{position:"absolute"},"data-url":t.path,ref_for:!0,ref_key:"iframeRef",ref:f},null,8,E)),[[P,p(g)===t.path]])]),_:2},1032,["name"])])),[[s,t.meta.loading]])),128))])])}}});export{G as default};
