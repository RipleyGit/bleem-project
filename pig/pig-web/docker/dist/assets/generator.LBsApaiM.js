import{g as R,p as $}from"./table.DByxjNI0.js";import{l as E}from"./group.Bd8YwRmf.js";import{c as G,o as Q}from"./template.DY8D7_ZN.js";import{L as V,k as Z,d as A,r as s,_ as B}from"./index.Cli_Cq8U.js";import{a as J,r as b,y as K,p as W,q as X,ae as i,af as Y,Q as ee,u as r,o as c,E as y,H as l,G as e,e as h,b as ae,M as le,a8 as te,U as L,S as x}from"./vue.DKOcwzik.js";const re=B(J({__name:"generator",props:{tableName:{type:String},dsName:{type:String}},emits:["refreshDataList"],setup(C,{expose:S,emit:w}){const v=C,D=w,j=b(!1),f=b(!1),_=b(),P=b(),k=b(""),t=K({id:"",generatorType:"0",formLayout:1,backendPath:"",frontendPath:"",packageName:"",email:"",author:"",version:"",moduleName:"",functionName:"",className:"",tableComment:"",tableName:"",dsName:"",style:"",childTableName:""}),q=b([]),z=b({tableName:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],tableComment:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],className:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],packageName:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],author:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],moduleName:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],functionName:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],generatorType:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],formLayout:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],backendPath:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],frontendPath:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],style:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),U=()=>{E().then(({data:m})=>{m&&m.length>0&&(q.value=m)})};return W(()=>P,()=>{const{childTableName:m}=P.value||{};k.value=m?`${v.tableName} + ${m}`:v.tableName},{deep:!0,immediate:!0}),X(()=>{var m,a;_.value&&_.value.resetFields(),t.id="",t.tableName=String(v.tableName),t.dsName=String(v.dsName),m=t.dsName,a=t.tableName,f.value=!0,R(m,a).then(u=>{var g;Object.assign(t,u.data);let d=u.data.groupList;t.style=(g=d[0])==null?void 0:g.id;const n=V.get("frontendPath"),p=V.get("backendPath");n&&p&&(t.frontendPath=n,t.backendPath=p)}).finally(()=>{f.value=!1}),U(),(async()=>G().then(({data:u})=>{u||Z().confirm("\u6A21\u677F\u53D1\u73B0\u65B0\u7248\u672C\uFF0C\u662F\u5426\u66F4\u65B0\uFF1F").then(()=>{Q().then(()=>{A().success("\u66F4\u65B0\u6210\u529F"),U()})}).catch(()=>{})}))()}),S({submitHandle:async()=>{try{return!!await _.value.validate()&&(f.value=!0,await $(Object.assign(t,P.value)),j.value=!1,D("refreshDataList"),t)}catch{return Promise.reject()}finally{t.generatorType==="1"&&(V.set("frontendPath",t.frontendPath),V.set("backendPath",t.backendPath)),f.value=!1}}}),(m,a)=>{const u=i("el-input"),d=i("el-form-item"),n=i("el-col"),p=i("tip"),g=i("el-row"),F=i("el-option"),H=i("el-select"),N=i("el-radio"),T=i("el-radio-group"),I=i("el-form"),M=Y("loading");return ee((c(),y(I,{model:r(t),rules:r(z),"label-width":"120px",ref_key:"dataFormRef",ref:_},{default:l(()=>[e(g,null,{default:l(()=>[e(n,{span:12,class:"mb20"},{default:l(()=>[e(d,{label:"\u8868\u540D",prop:"tableName"},{default:l(()=>[e(u,{disabled:"",placeholder:"\u8868\u540D",value:r(k)},null,8,["value"])]),_:1})]),_:1}),e(n,{span:12,class:"mb20"},{default:l(()=>[e(d,{prop:"tableComment"},{label:l(()=>[a[11]||(a[11]=h("span",null,"\u6CE8\u91CA",-1)),e(p,{content:"\u6CE8\u91CA"})]),default:l(()=>[e(u,{placeholder:"\u8BF4\u660E",modelValue:r(t).tableComment,"onUpdate:modelValue":a[0]||(a[0]=o=>r(t).tableComment=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,null,{default:l(()=>[e(n,{span:12,class:"mb20"},{default:l(()=>[e(d,{label:"\u7C7B\u540D",prop:"className"},{default:l(()=>[e(u,{placeholder:"\u7C7B\u540D",modelValue:r(t).className,"onUpdate:modelValue":a[1]||(a[1]=o=>r(t).className=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12,class:"mb20"},{default:l(()=>[e(d,{label:"\u4F5C\u8005",prop:"author"},{default:l(()=>[e(u,{placeholder:"\u9ED8\u8BA4\u4F5C\u8005",modelValue:r(t).author,"onUpdate:modelValue":a[2]||(a[2]=o=>r(t).author=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,null,{default:l(()=>[e(n,{span:12,class:"mb20"},{default:l(()=>[e(d,{label:"\u9879\u76EE\u5305\u540D",prop:"packageName"},{default:l(()=>[e(u,{placeholder:"\u9879\u76EE\u5305\u540D",modelValue:r(t).packageName,"onUpdate:modelValue":a[3]||(a[3]=o=>r(t).packageName=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12,class:"mb20"},{default:l(()=>[e(d,{prop:"moduleName"},{label:l(()=>[a[12]||(a[12]=h("span",null,"\u6A21\u5757\u540D",-1)),e(p,{content:"\u6240\u5C5E\u5FAE\u670D\u52A1\u6A21\u5757\u540D\u79F0\uFF0C\u5BF9\u5E94\u5FAE\u670D\u52A1\u8DEF\u7531\u524D\u7F00 \uFF08\u5355\u4F53\u56FA\u5B9A admin\uFF09"})]),default:l(()=>[e(u,{placeholder:"\u6A21\u5757\u540D",modelValue:r(t).moduleName,"onUpdate:modelValue":a[4]||(a[4]=o=>r(t).moduleName=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,null,{default:l(()=>[e(n,{span:12,class:"mb20"},{default:l(()=>[e(d,{prop:"functionName"},{label:l(()=>[a[13]||(a[13]=h("span",null,"\u529F\u80FD\u540D",-1)),e(p,{content:"\u5BF9\u5E94\u751F\u6210\u7684Controller @RequestMapping \u8BF7\u6C42\u8DEF\u5F84"})]),default:l(()=>[e(u,{placeholder:"\u529F\u80FD\u540D",modelValue:r(t).functionName,"onUpdate:modelValue":a[5]||(a[5]=o=>r(t).functionName=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12,class:"mb20"},{default:l(()=>[e(d,{label:"\u4EE3\u7801\u98CE\u683C",prop:"style"},{default:l(()=>[e(H,{modelValue:r(t).style,"onUpdate:modelValue":a[6]||(a[6]=o=>r(t).style=o)},{default:l(()=>[(c(!0),ae(le,null,te(r(q),(o,O)=>(c(),y(F,{key:O,label:o.groupName,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,null,{default:l(()=>[e(n,{span:12,class:"mb20"},{default:l(()=>[e(d,{label:"\u8868\u5355\u5E03\u5C40",prop:"formLayout"},{default:l(()=>[e(T,{modelValue:r(t).formLayout,"onUpdate:modelValue":a[7]||(a[7]=o=>r(t).formLayout=o)},{default:l(()=>[e(N,{border:"",value:1},{default:l(()=>a[14]||(a[14]=[L("\u4E00\u5217")])),_:1}),e(N,{border:"",value:2},{default:l(()=>a[15]||(a[15]=[L("\u4E24\u5217")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12,class:"mb20"},{default:l(()=>[e(d,{label:"\u751F\u6210\u65B9\u5F0F",prop:"generatorType"},{default:l(()=>[e(T,{modelValue:r(t).generatorType,"onUpdate:modelValue":a[8]||(a[8]=o=>r(t).generatorType=o)},{default:l(()=>[e(N,{border:"",value:"1"},{default:l(()=>a[16]||(a[16]=[L("\u81EA\u5B9A\u4E49\u8DEF\u5F84")])),_:1}),e(N,{border:"",value:"0"},{default:l(()=>a[17]||(a[17]=[L("ZIP \u538B\u7F29\u5305")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24,class:"mb20"},{default:l(()=>[r(t).generatorType==="1"?(c(),y(d,{key:0,prop:"backendPath"},{label:l(()=>[a[18]||(a[18]=h("span",null,"\u540E\u7AEF\u751F\u6210\u8DEF\u5F84",-1)),e(p,{content:"\u540E\u7AEF\u6A21\u5757biz\u6240\u5728\u6587\u4EF6\u5168\u8DEF\u5F84\u6BD4\u5982\uFF1AD:\\data\\pigx\\pigx-upms\\pigx-upms-biz"})]),default:l(()=>[e(u,{placeholder:"\u540E\u7AEF\u751F\u6210\u8DEF\u5F84",modelValue:r(t).backendPath,"onUpdate:modelValue":a[9]||(a[9]=o=>r(t).backendPath=o)},null,8,["modelValue"])]),_:1})):x("",!0),r(t).generatorType==="1"?(c(),y(d,{key:1,prop:"frontendPath"},{label:l(()=>[a[19]||(a[19]=h("span",null,"\u524D\u7AEF\u751F\u6210\u8DEF\u5F84",-1)),e(p,{content:"\u524D\u7AEF\u6240\u5728\u6587\u4EF6\u5168\u8DEF\u5F84\u6BD4\u5982\uFF1AD:\\data\\pigx-ui"})]),default:l(()=>[e(u,{placeholder:"\u524D\u7AEF\u751F\u6210\u8DEF\u5F84",modelValue:r(t).frontendPath,"onUpdate:modelValue":a[10]||(a[10]=o=>r(t).frontendPath=o)},null,8,["modelValue"])]),_:1})):x("",!0)]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[M,r(f)]])}}}),[["__scopeId","data-v-1f084207"]]);export{re as default};
