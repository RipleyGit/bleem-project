import{u as z}from"./table.DpIaW019.js";import{f as L,d as T}from"./table.DByxjNI0.js";import{v as V,k as I,d as p}from"./index.Cli_Cq8U.js";import{a as U,aD as j,r as E,y as G,ae as r,af as K,o as f,E as h,H as n,Q,u as a,G as o,U as y,K as A,x as B}from"./vue.DKOcwzik.js";const J=U({name:"systemFormHistoryDialog",emits:["refresh"],setup(M,{expose:C,emit:w}){const b=w,x=j(),{t:m}=V.useI18n(),s=E(!1),t=G({queryForm:{},pageList:L,createdIsNeed:!1,descs:["create_time"]}),{getDataList:u,currentChangeHandle:_,sizeChangeHandle:k,sortChangeHandle:v}=z(t);return C({openDialog:()=>{const{tableName:c,dsName:e}=x.query;s.value=!0,t.queryForm.dsName=e,t.queryForm.tableName=c,u()}}),(c,e)=>{const d=r("el-table-column"),g=r("el-button"),H=r("el-table"),N=r("pagination"),S=r("el-drawer"),q=K("loading");return f(),h(S,{title:"\u8BBE\u8BA1\u5386\u53F2",modelValue:a(s),"onUpdate:modelValue":e[0]||(e[0]=l=>B(s)?s.value=l:null),draggable:""},{default:n(()=>[Q((f(),h(H,{data:a(t).dataList,style:{width:"100%"},onSortChange:a(v)},{default:n(()=>[o(d,{type:"index",label:"\u5E8F\u53F7",width:"60"}),o(d,{prop:"createTime",label:"\u8BBE\u8BA1\u65F6\u95F4","show-overflow-tooltip":""}),o(d,{label:"\u64CD\u4F5C",width:"150"},{default:n(l=>[o(g,{icon:"refresh",text:"",type:"primary",onClick:D=>{return i=l.row.id,void b("refresh",i);var i}},{default:n(()=>e[1]||(e[1]=[y("\u56DE\u6EDA")])),_:2},1032,["onClick"]),o(g,{icon:"delete",text:"",type:"primary",onClick:D=>(async i=>{try{await I().confirm(m("common.delConfirmText"))}catch{return}try{await T(i),u(),p().success(m("common.delSuccessText"))}catch(F){p().error(F.msg)}})(l.row.id)},{default:n(()=>e[2]||(e[2]=[y("\u5220\u9664")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSortChange"])),[[q,a(t).loading]]),o(N,A({onSizeChange:a(k),onCurrentChange:a(_)},a(t).pagination),null,16,["onSizeChange","onCurrentChange"])]),_:1},8,["modelValue"])}}});export{J as default};
